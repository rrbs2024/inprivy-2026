<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{{ grupo.nome }} - Inprivy</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f7f7f7; margin:0; padding:0; }
        header { background: #eebb80; color: rgb(117,58,16); padding:15px; text-align:center; }
        main { max-width: 600px; margin:30px auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.1);}
        h2 { color:#754a10; text-align:center;}
        p { margin:8px 0; }
        button { background:#eebb80; color:rgb(117,58,16); border:none; padding:10px 20px; border-radius:6px; cursor:pointer; font-weight:bold; margin:5px 0; }
        button:hover { background:#d49a60; }
        .messages p { padding:8px; border-radius:4px; }
        .error { background:#f8d7da; color:#721c24; }
        .success { background:#d4edda; color:#155724; }
        ul { list-style:none; padding:0; }
        li { margin-bottom:6px; }
        a.button { display:inline-block; text-align:center; margin:5px 5px 5px 0; padding:6px 12px; background:#eebb80; color:rgb(117,58,16); border-radius:6px; text-decoration:none; font-weight:bold; }
        a.button:hover { background:#d49a60; }
        a.danger { background:#d9534f; color:#fff; }
        a.danger:hover { background:#c9302c; }
        a { display:block; text-align:center; margin-top:15px; color:#754a10; text-decoration:none; }
        a:hover { text-decoration:underline; }
    </style>
</head>
<body>
    <header>
        <h1>Inprivy - Detalhe Grupo</h1>
    </header>
    <main>
        <h2>{{ grupo.nome }}</h2>
        <p>{{ grupo.descricao }}</p>

        {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <p class="{% if message.tags == 'error' %}error{% else %}success{% endif %}">{{ message }}</p>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Entrar/Sair do grupo -->
        <form method="POST">
            {% csrf_token %}
            {% if esta_no_grupo %}
                <button type="submit" name="acao" value="sair">Sair do Grupo</button>
            {% else %}
                <button type="submit" name="acao" value="entrar">Entrar no Grupo</button>
            {% endif %}
        </form>

        <!-- BotÃµes do criador -->
        {% if grupo.criador == request.user.associado %}
            <a href="{% url 'editar_grupo' grupo.id %}" class="button">Editar Grupo</a>
            <a href="{% url 'excluir_grupo' grupo.id %}" class="button danger">Excluir Grupo</a>
        {% endif %}

        <h3>Membros:</h3>
        <ul>
            {% for membro in grupo.membros.all %}
                <li>{{ membro.associado_nome }}</li>
            {% empty %}
                <li>Nenhum membro ainda.</li>
            {% endfor %}
        </ul>

        <a href="{% url 'home_public' %}">Voltar para a Home</a>
    </main>
</body>
</html>
